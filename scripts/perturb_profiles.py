# -*- coding: utf-8 -*-"""Generate perturbed profiles """# load modulesimport numpy as npimport xarray as xr#%% Main scriptif __name__ == "__main__":#%% Perturbed sonde humidity profiles    sonde_file = '/Users/bfildier/Data/EUREC4A/merged/sondes/all_sondes.nc'    sonde_data = xr.open_dataset(sonde_file)        # Increase specific humidity by 3%    sonde_data_p3pct = sonde_data.copy()    sonde_data_p3pct.specific_humidity.values *= 1.03        # Decrease specific humidity by 3%    sonde_data_m3pct = sonde_data.copy()    sonde_data_m3pct.specific_humidity.values *= 0.97        # Save    sonde_file_p3pct = sonde_file.split('.')[0]+'_qv_p3pct.nc'    sonde_data_p3pct.to_netcdf(sonde_file_p3pct)    sonde_file_m3pct = sonde_file.split('.')[0]+'_qv_m3pct.nc'    sonde_data_m3pct.to_netcdf(sonde_file_m3pct)        #%% Perturbed ERA humidity profiles    ERA_q_file = '/Users/bfildier/Data/EUREC4A/ERA/q_2020_01_02_ERA5_hourly_Barbados.nc'    ERA_q_data = xr.open_dataset(ERA_q_file)        # Increase specific humidity by 30%    ERA_q_data_p30pct = ERA_q_data.copy()    ERA_q_data_p30pct.q.values *= 1.3        # Decrease specific humidity by 30%    ERA_q_data_m30pct = ERA_q_data.copy()    ERA_q_data_m30pct.q.values *= 0.7    # Save    ERA_q_file_p30pct = ERA_q_file.split('.')[0]+'_p30pct.nc'    ERA_q_data_p30pct.to_netcdf(ERA_q_file_p30pct)    ERA_q_file_m30pct = ERA_q_file.split('.')[0]+'_m30pct.nc'    ERA_q_data_m30pct.to_netcdf(ERA_q_file_m30pct)    #%% Perturbed ERA SST values    ERA_SST_file = '/Users/bfildier/Data/EUREC4A/ERA/SST_2020_01_02_ERA5_hourly_Barbados.nc'    ERA_SST_data = xr.open_dataset(ERA_SST_file)        # Increase SST by 0.21K    ERA_SST_data_p021K = ERA_SST_data.copy()    ERA_SST_data_p021K.sstk.values += 0.21        # Decrease SST by 0.21K    ERA_SST_data_m021K = ERA_SST_data.copy()    ERA_SST_data_m021K.sstk.values -= 0.21    # Save    ERA_SST_file_p021K = ERA_SST_file.split('.')[0]+'_p021K.nc'    ERA_SST_data_p021K.to_netcdf(ERA_SST_file_p021K)    ERA_SST_file_m021K = ERA_SST_file.split('.')[0]+'_m021K.nc'    ERA_SST_data_m021K.to_netcdf(ERA_SST_file_m021K)        # Increase SST by 0.42K    ERA_SST_data_p021K = ERA_SST_data.copy()    ERA_SST_data_p021K.sstk.values += 0.42        # Decrease SST by 0.42K    ERA_SST_data_m021K = ERA_SST_data.copy()    ERA_SST_data_m021K.sstk.values -= 0.42    # Save    ERA_SST_file_p021K = ERA_SST_file.split('.')[0]+'_p042K.nc'    ERA_SST_data_p021K.to_netcdf(ERA_SST_file_p021K)    ERA_SST_file_m021K = ERA_SST_file.split('.')[0]+'_m042K.nc'    ERA_SST_data_m021K.to_netcdf(ERA_SST_file_m021K)